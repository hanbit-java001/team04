<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ideaBoard">

	<select id="selectSysdate" resultType="map">
		SELECT SYSDATE
		  FROM DUAL
	</select>

	<select id="selectBoards" resultType="IdeaBoardVO">
		SELECT USER_ID, CONTENTS, TITLE FROM IDEA_BOARD
	</select>

	<select id="selectTotCnt" resultType="int">
		SELECT COUNT(*) FROM IDEA_BOARD
	</select>

	<select id="selectBoards2" parameterType="int" resultType="IdeaBoardVO">
	<![CDATA[
	SELECT 	a.rn, a.userId, a.title, a.contents, a.regDate
		  FROM (
			SELECT a.rn, a.userId, a.title, a.contents, a.regDate
			  FROM (
				SELECT ROWNUM rn, USER_ID userId, TITLE title,
					   CONTENTS contents, regDate regDate
				  FROM IDEA_BOARD) a
			 WHERE rn <= 9 * #{pageNum}) a
		 WHERE rn > 9 * (#{pageNum} - 1)
		  	]]>
	</select>
	<select id="selectNextIndex" resultType="int">
		SELECT SEQ_IDX.NEXTVAL
		FROM DUAL
	</select>
	<insert id="insertIdea" parameterType="IdeaBoardVO">
		INSERT INTO IDEA_BOARD
		(BOARD_IDX,TITLE,REGDATE,CONTENTS,USER_ID,MOD_DATE,CONFIRM,HITCNT,FILE_ID)
		VALUES
		(#{boardIdx}, #{title}, #{regDate}, #{contents}, #{userId},
		#{modDate}, #{confirm}, #{hitCnt}, #{fileId})
	</insert>
</mapper>